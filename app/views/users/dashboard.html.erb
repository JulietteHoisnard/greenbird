<div class="container">
  <div class="top-banner">
    <div style="height: 0;text-align: center; position: relative;top: -75px;">
      <%= cl_image_tag current_user.avatar_url, class: "avatar-large avatar-banner" %>
    </div>
    <h3>Welcome <%= @user.username %></h3>
  </div>

  <div class="rankings-container">
    <div class="ranking-card margin-ranking-card ">
      <h3>My ranking</h3>
        <h3>in <%= @user.country %></h3>
        <h4>5</h4>
    </div>
    <div class="ranking-card margin-ranking-card">
      <h3>Days in a row</h3>
      <h4>5</h4>
    </div>
    <div class="ranking-card margin-ranking-card">
      <h3>Challenges done</h3>
      <h4><%= @challenges_done.count %></h4>
    </div>
    <div class="ranking-card">
      <h3>Optional challenges done</h3>
      <h4><%= @opt_challenges_done.count %></h4>
    </div>
  </div>

  <div class="bottom-box">

    <% if @challenges_done %>

        <div id="carouselExampleControls" class="half-bottom-caroussel margin-ranking-card carousel slide" data-ride="carousel">
          
          <div class="top-text">
            <p>Challenges done: </p>
          </div>

          <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="<%= cl_image_path @challenges_done.first.challenge.photo.key, height: 400, width: 600, crop: :fill %>" class="d-block w-100" alt="...">
                <div class="carousel-caption d-none d-md-block">
                  <h4><%= @challenges_done.first.challenge.title %></h4>
                </div>
            </div>
            <div class="carousel-item">
              <img src="<%= cl_image_path @challenges_done.last.challenge.photo.key, height: 400, width: 600, crop: :fill %>" class="d-block w-100" alt="...">
                <div class="carousel-caption d-none d-md-block">
                  <h4><%= @challenges_done.last.challenge.title %></h4>
                </div>
            </div>
          </div>
          <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
          </a>
          <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
          </a>
        </div>

    <% else %>
      <div class="half-bottom margin-ranking-card">
        <p>No challenges done yet !</p>
      </div>
    <% end %>

    <% if @challenge %>

      <div div class="half-bottom", style="background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), url('<%= cl_image_path @challenge.challenge.photo.key, height: 400, width: 600, crop: :fill %>')">
        <%= link_to challenge_path(@challenge.challenge) do %>
          <p>Next challenge:</p>
          <div class="containerchallenge">
            <h4><%= @challenge.challenge.title %></h4>
          </div>
        <% end %>
      </div>
    <% else %>
      <div div class="half-bottom">
        <h3>Stay tuned for more challenges!</h3>
      </div>
    <% end %>
  </div>
</div>
